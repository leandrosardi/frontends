!function(t){"use strict";function e(t){return null===t||void 0===t}function o(){t(document.body).on("click",n(),a),t(window).on("message",i).on("unload",function(){t.isFunction(r.onClose)&&"checkoutData"in r&&r.onClose(s.checkoutData)})}function n(){var e="";return t.each(r.shortDomain,function(t,o){e+="a[href^='"+o+"']"+(t<r.shortDomain.length-1?",":"")}),"string"==typeof r.longDomain&&(e+=",a[href*='"+r.longDomain+"']"),e}function a(e){var o=t(this),n=o.data("modal-url");"string"==typeof n&&(e.preventDefault(),window._$elz.m.open(n,null),t.isFunction(r.onModalOpen)&&r.onModalOpen(o),s.currentTrigger=o)}function i(o){var n=(o=o.originalEvent).data;if(o.origin===r.domain&&"string"==typeof n)try{var a=JSON.parse(n);switch(a.key){case"modal-theme":var i={};if(t.each(r.theme,function(e,o){switch(e){case"button":t.each(o,function(t,e){switch(t){case"bg":i.cb=e;break;case"text":i.ct=e}});break;case"checkout":t.each(o,function(t,e){switch(t){case"headerBg":i.chbg=e;break;case"headerText":i.chtx=e}})}}),o.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.keys(i).length?i:null}),r.domain),r.redirect||o.source.postMessage(JSON.stringify({key:"set-redirect",data:r.redirect}),r.domain),t.isFunction(r.getTracking)){var c=r.getTracking(s.currentTrigger);(function(t){return e(t)||!t.length})(c)||o.source.postMessage(JSON.stringify({key:"set-tracking",data:c}),r.domain)}break;case"purchase":t.isFunction(r.onPurchase)&&r.onPurchase(a.data);break;case"processing":t.isFunction(r.onProcessing)&&r.onProcessing(a.data);break;case"modal-close":t.isFunction(r.onClose)&&r.onClose(s.currentTrigger,a.data);break;case"beforeunload":s.checkoutData=a.data}}catch(t){}}window._$elz=window._$elz||{};var r={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300,checkout:!1,redirect:!1},c={},s={supported:function(){if(!("localStorage"in window))return!1;var t="___test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}},set:function(t,e,o){if(this.supported()&&void 0!==t){"boolean"==typeof o&&!o||"number"==typeof o||(o=3600),null!==e&&"object"==typeof e&&(e=JSON.stringify(e));try{window.localStorage.setItem(t,e),("boolean"!=typeof o||o)&&window.localStorage.setItem(t+"_ttl",Date.now()+1e3*o)}catch(t){}}},get:function(t){if(!this.supported()||!this.exists(t)||!this.validity(t))return null;var e=window.localStorage.getItem(t);try{return JSON.parse(e)}catch(t){return e}},clean:function(){if(this.supported())for(var t in window.localStorage)this.validity(t)},validity:function(t){return!(t+"_ttl"in window.localStorage&&window.localStorage[t+"_ttl"]<Date.now())||(window.localStorage.removeItem(t),window.localStorage.removeItem(t+"_ttl"),!1)},exists:function(t){return!!this.supported()&&!e(window.localStorage.getItem(t))}};window._$elz.m=window._$elz.m||{s:{src:r.domain+"/assets/js/embed/modal.js"}},void 0===window._$elz.m.open?t.getScript(window._$elz.m.s.src,function(){o()}):o(),t.selz=function(o){t.extend(!0,r,o),t.isArray(r.shortDomain)||(r.shortDomain=[r.shortDomain]),r.shortDomain.push(r.domain+"/checkout/item/"),t(n()).each(function(){!function(o,n){function a(o){i in c&&!e(o)&&Object.keys(o).length&&(c[i].forEach(function(e){var n=e[0],a=e[1];t.isFunction(a)&&a(o),r.checkout?n.data("modal-url",o.CheckoutUrl).attr("href",o.CheckoutUrl):n.data("modal-url",o.Url),t.isFunction(r.onDataReady)&&r.onDataReady(n,o)}),delete c[i])}var i=o.attr("href"),l="number"==typeof r.cache;i in c?c[i].push([o,n]):(c[i]=[],c[i].push([o,n]),l&&s.exists(i)?a(s.get(i)):t.getJSON(r.domain+"/embed/itemdata?itemurl="+i+"&callback=?",function(t){l&&s.set(i,t,r.cache),a(t)}).fail(function(){if("console"in window)throw new Error("We couldn't find a matching item for that link")}))}(t(this))})}}(window.jQuery);